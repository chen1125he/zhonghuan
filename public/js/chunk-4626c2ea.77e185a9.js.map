{"version":3,"sources":["webpack:///./node_modules/_core-js@2.6.0@core-js/modules/_object-gops.js","webpack:///./node_modules/_core-js@2.6.0@core-js/modules/_object-assign.js","webpack:///./node_modules/_core-js@2.6.0@core-js/modules/_object-pie.js","webpack:///./node_modules/_core-js@2.6.0@core-js/modules/es6.object.assign.js","webpack:///./src/views/page/detail.vue?ff79","webpack:///./src/views/page/detail.vue?318b","webpack:///src/views/page/detail.vue","webpack:///./src/views/page/detail.vue?efd7","webpack:///./src/views/page/detail.vue?1023"],"names":["exports","f","Object","getOwnPropertySymbols","getKeys","__webpack_require__","gOPS","pIE","toObject","IObject","$assign","assign","module","A","B","S","Symbol","K","split","forEach","k","keys","join","target","source","T","aLen","arguments","length","index","getSymbols","isEnum","key","concat","j","call","propertyIsEnumerable","$export","F","_node_modules_mini_css_extract_plugin_0_4_5_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_detail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_0_4_5_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_detail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","margin","font-size","color","attrs","type","justify","_v","_s","pageTitle","margin-top","ref","min-width","model","form","rules","label-width","label-position","label","prop","span","placeholder","autosize","value","callback","$$v","$set","expression","margin-left","font-weight","_l","item","item_type","width","offset","icon","size","on","click","$event","deleteTextImage","_e","action","show-file-list","drag","multiple","on-success","handleAvatarSuccess","before-upload","beforeAvatarUpload","src","image","margin-bottom","plain","addText","addImage","submitForm","staticRenderFns","detailvue_type_script_lang_js_","components","data","pageState","pageId","name","page_items","required","message","trigger","watch","newValue","methods","queryPageDetail","_this","params","page_id","$http","pageDetail","then","res","result","success","console","log","push","content","splice","formName","_this2","$refs","validate","valid","page_items_attributes","map","position","addPage","$message","error","editPage","url","file","picTypeRigth","isLt2M","mounted","$route","query","page_detailvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-4626c2ea.77e185a9.js","sourcesContent":["exports.f = Object.getOwnPropertySymbols;\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n","exports.f = {}.propertyIsEnumerable;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",staticStyle:{\"margin\":\"15px 15px\"}},[_c('el-row',{staticStyle:{\"font-size\":\"16px\",\"color\":\"#303133\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_vm._v(_vm._s(_vm.pageTitle))]),_c('el-row',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_c('el-form',{ref:\"form\",staticStyle:{\"min-width\":\"500px\"},attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"80px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"页面名称\",\"prop\":\"name\"}},[_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{attrs:{\"placeholder\":\"请输入页面名称\",\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1)],1),_c('div',{staticStyle:{\"margin-left\":\"10px\",\"font-size\":\"14px\",\"font-weight\":\"900\"}},[_vm._v(\"页面内容\"),_c('i',{staticClass:\"avatar-limit\"},[_vm._v(\"图片小于1M,格式jpg,png,jpeg\")])]),_vm._l((_vm.form.page_items),function(item,index){return [(item.item_type == 'content')?_c('el-form-item',{key:index,attrs:{\"label\":\"文字\"}},[_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入文字 \",\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(item.content),callback:function ($$v) {_vm.$set(item, \"content\", $$v)},expression:\"item.content\"}})],1),_c('el-col',{attrs:{\"span\":2,\"offset\":2}},[_c('el-button',{attrs:{\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteTextImage(index)}}})],1)],1)],1):_vm._e(),(item.item_type == 'image')?_c('el-form-item',{key:index,attrs:{\"label\":\"图片\"}},[_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"show-file-list\":false,\"drag\":false,\"multiple\":false,\"on-success\":_vm.handleAvatarSuccess(item),\"before-upload\":_vm.beforeAvatarUpload}},[(item.image)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":item.image}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-col',{attrs:{\"span\":2,\"offset\":2}},[_c('el-button',{attrs:{\"icon\":\"el-icon-delete\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteTextImage(index)}}})],1)],1)],1):_vm._e()]}),_c('el-row',{staticStyle:{\"margin-bottom\":\"30px\",\"margin-top\":\"30px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.addText}},[_vm._v(\"添加文字\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.addImage}},[_vm._v(\"添加图片\")])],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('form')}}},[_vm._v(\"保存\")])],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\" style=\"margin: 15px 15px;\">\r\n    <!-- 页面名字 -->\r\n    <el-row type=\"flex\" justify=\"start\" style=\" font-size: 16px; color: #303133;\">{{pageTitle}}</el-row>\r\n    <el-row type=\"flex\" justify=\"start\" style=\"margin-top: 30px;\">\r\n     <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\" label-position=\"right\" style=\"min-width: 500px;\">\r\n        <el-form-item label=\"页面名称\" prop=\"name\">\r\n          <el-row type=\"flex\">\r\n            <el-col :span=\"20\">\r\n              <el-input v-model=\"form.name\" placeholder=\"请输入页面名称\" type=\"textarea\" autosize></el-input>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form-item>\r\n        <div style=\"margin-left:10px; font-size: 14px; font-weight: 900;\">页面内容<i class=\"avatar-limit\">图片小于1M,格式jpg,png,jpeg</i></div>\r\n        <template v-for=\"(item, index) in form.page_items\">\r\n              <el-form-item v-if=\"item.item_type == 'content'\" label=\"文字\" :key=\"index\">\r\n                <el-row type=\"flex\">\r\n                  <el-col :span=\"20\">\r\n                    <el-input v-model=\"item.content\" placeholder=\"请输入文字 \" type=\"textarea\" autosize style=\"width: 100%;\"></el-input>\r\n                  </el-col>\r\n                  <el-col :span=\"2\" :offset=\"2\">\r\n                    <el-button icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteTextImage(index)\"></el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-form-item>\r\n              <el-form-item v-if=\"item.item_type == 'image'\" label=\"图片\" :key=\"index\">\r\n                <el-row type=\"flex\">\r\n                  <el-col :span=\"10\">\r\n                    <el-upload class=\"avatar-uploader\"\r\n                               action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                               :show-file-list=\"false\"\r\n                               :drag=\"false\"\r\n                               :multiple=\"false\"\r\n                               :on-success=\"handleAvatarSuccess(item)\"\r\n                               :before-upload=\"beforeAvatarUpload\">\r\n                      <img v-if=\"item.image\" :src=\"item.image\" class=\"avatar\">\r\n                      <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                  </el-col>\r\n                  <el-col :span=\"2\" :offset=\"2\">\r\n                    <el-button icon=\"el-icon-delete\" size=\"small\" @click=\"deleteTextImage(index)\"></el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-form-item>\r\n        </template>\r\n        <el-row style=\"margin-bottom: 30px;margin-top: 30px;\">\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"addText\">添加文字</el-button>\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"addImage\">添加图片</el-button>\r\n        </el-row>\r\n        <el-button type=\"primary\" @click=\"submitForm('form')\">保存</el-button>\r\n      </el-form>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  components: {\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      pageState: '', // 1新增，2编辑，3预览\r\n      pageTitle: '', // 页面标题\r\n      pageId: '', // 自定义页面id\r\n      form: {\r\n        name: '',\r\n        page_items: []\r\n      },\r\n      rules: { // 校验规则\r\n        name: { required: true, message: '请输入资讯标题名称', trigger: 'blur' }\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    pageState (newValue) {\r\n      let name = '自定义'\r\n      switch (newValue) {\r\n        case 1:\r\n          this.pageTitle = `新增${name}`\r\n          break\r\n        case 2:\r\n          this.pageTitle = `编辑${name}`\r\n          break\r\n        case 3:\r\n          this.pageTitle = `${name}详情`\r\n          break\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 查询自定页面详情\r\n    queryPageDetail () {\r\n      let params = {\r\n        page_id: this.pageId\r\n      }\r\n      this.$http.pageDetail(params, 'get').then(res => {\r\n        let result = res.data.success\r\n        this.form = result\r\n        console.log('InfomationDetail', result)\r\n      })\r\n    },\r\n    // 添加文字\r\n    addText () {\r\n      this.form.page_items.push({\r\n        item_type: 'content',\r\n        image: '',\r\n        content: ''\r\n      })\r\n    },\r\n\r\n    // 添加图片\r\n    addImage () {\r\n      this.form.page_items.push({\r\n        item_type: 'image',\r\n        image: '',\r\n        content: ''\r\n      })\r\n    },\r\n\r\n    // 删除图片或者文字\r\n    deleteTextImage (index) {\r\n      this.form.page_items.splice(index, 1)\r\n    },\r\n\r\n    // 提交表单\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let params = {}\r\n\r\n          params.name = this.form.name\r\n          params.page_items_attributes = this.form.page_items.map((item, index) => {\r\n            return Object.assign({ position: index }, item)\r\n          })\r\n          console.log(params)\r\n          if (this.pageState === 1) {\r\n            this.$http.addPage(params, 'post').then(res => {\r\n              let result = res.data.success\r\n              if (result) {\r\n                this.$message.success('新增成功')\r\n              } else {\r\n                this.$message.error('新增失败')\r\n              }\r\n            })\r\n          } else {\r\n            this.$http.editPage(params, 'post').then(res => {\r\n              let result = res.data.success\r\n              if (result) {\r\n                this.$message.success('修改成功')\r\n              } else {\r\n                this.$message.error('修改失败')\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n\r\n    handleAvatarSuccess (data) {\r\n      return function (res) {\r\n        // res为接口返回数据\r\n        data.image = res.url || ''\r\n      }\r\n      // this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n\r\n    beforeAvatarUpload (file) {\r\n      const picTypeRigth = file.type === 'image/jpeg' && file.type === 'image/jpg' && file.type === 'image/png'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!picTypeRigth) {\r\n        this.$message.error('上传图片只能是 jpg、jpeg、png 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传图片大小不能超过 2MB!')\r\n      }\r\n      return picTypeRigth && isLt2M\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.pageState = +this.$route.query.pageState || 1\r\n    this.pageId = this.$route.query['page_id'] || ''\r\n    if (this.pageState !== 1) {\r\n      this.queryPageDetail()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n  .avatar-limit{\r\n    font-size: 12px;\r\n    font-weight: 300;\r\n    margin-left: 20px;\r\n    color: #909399;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=325a9186&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"detail.vue\"\nexport default component.exports"],"sourceRoot":""}