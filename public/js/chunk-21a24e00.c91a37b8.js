(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21a24e00"],{"06f3":function(t,e,r){t.exports=r("6609")},"091d":function(t,e,r){"use strict";var i=r("cd01"),a=r("1d5f");t.exports=function(t,e,r){e in t?i.f(t,e,a(0,r)):t[e]=r}},3573:function(t,e,r){"use strict";var i=r("ac1b"),a=r("5b7f"),n=r("3a08"),o="startsWith",s=""[o];i(i.P+i.F*r("7d31")(o),"String",{startsWith:function(t){var e=n(this,t,o),r=a(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return s?s.call(e,i,r):e.slice(r,r+i.length)===i}})},"3a08":function(t,e,r){var i=r("f83a"),a=r("346b");t.exports=function(t,e,r){if(i(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(a(t))}},"54be":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container",staticStyle:{margin:"15px 15px"}},[r("el-row",{staticStyle:{"font-size":"16px",color:"#303133"},attrs:{type:"flex",justify:"start"}},[r("router-link",{staticClass:"el-button--text",attrs:{to:"/information/list",replace:""}},[t._v("资讯管理")]),t._v("\n    / "+t._s(t.pageTitle)+"\n  ")],1),r("el-row",{staticStyle:{"margin-top":"30px"},attrs:{type:"flex",justify:"start"}},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px","label-suffix":":","label-position":"left"}},[r("el-form-item",{attrs:{label:"资讯标题",prop:"title",required:""}},[r("el-input",{attrs:{placeholder:"请输入资讯标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"资讯描述",prop:"desc",required:""}},[r("el-input",{attrs:{placeholder:"请输入资讯描述"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{label:"资讯图片",required:""}},[t.form.image&&t.form.image.url?r("div",{staticClass:"avatar"},[r("img",{attrs:{src:"https://szebra.cn"+t.form.image.url}}),r("i",{staticClass:"el-icon-circle-close",on:{click:t.removeConverImageUrl}})]):r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://szebra.cn/api/admin/images","show-file-list":!1,"on-success":t.handleAvatarSuccess,name:"image[file]","before-upload":t.beforeAvatarUpload}},[r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"阅读基数",prop:"base_number"}},[r("el-input",{model:{value:t.form.base_number,callback:function(e){t.$set(t.form,"base_number",e)},expression:"form.base_number"}})],1),r("el-form-item",{attrs:{label:"资讯类别",prop:"link_type",required:""}},[r("el-radio-group",{model:{value:t.form.link_type,callback:function(e){t.$set(t.form,"link_type",e)},expression:"form.link_type"}},[r("el-radio",{attrs:{label:"article"}},[t._v("链接公众号文章")]),r("el-radio",{attrs:{label:"page"}},[t._v("自定义页面")])],1)],1),"article"==t.form.link_type?r("el-form-item",{attrs:{label:"文章地址",required:""}},[r("el-input",{attrs:{placeholder:"请输入公众号文章地址"},model:{value:t.form.articleLink,callback:function(e){t.$set(t.form,"articleLink",e)},expression:"form.articleLink"}})],1):r("el-form-item",{attrs:{label:"链接页面",required:""}},[r("el-select",{attrs:{placeholder:"请选择链接页面"},model:{value:t.form.pageId,callback:function(e){t.$set(t.form,"pageId",e)},expression:"form.pageId"}},t._l(t.pageList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id+""}})}),1)],1),"informationCreate"===t.submitFuncName?r("el-form-item",{attrs:{label:"发布时间",prop:"public_at",required:""}},[r("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions1},model:{value:t.form.public_at,callback:function(e){t.$set(t.form,"public_at",e)},expression:"form.public_at"}})],1):t._e(),r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.submitBtnTitle))])],1)],1)],1)},a=[],n=(r("d85c"),r("bc2a")),o=r.n(n);function s(t){if(o()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var l=r("f22f"),c=r.n(l),f=r("06f3"),u=r.n(f);function m(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return s(t)||m(t)||p()}r("3573");var b=r("f360"),h=r.n(b),g=(r("b7ad"),r("175c"),r("bc97"),r("a5be"),{components:{},data:function(){return{pageState:"",informationId:"",pageTitle:"",submitBtnTitle:"",form:{id:"",title:"",desc:"",position:"",image:{url:""},link_type:"article",link:"",public_at:"",base_number:0,pageId:"",articleLink:""},pageList:[],pickerOptions1:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}}]}}},methods:{formatSubmitValue:function(){if("page"===this.form.link_type&&(this.form.link=this.form.pageId),"article"===this.form.link_type&&(this.form.link=this.form.articleLink),this.form.image.id){if(this.form.link){var t={id:this.form.id,information:h()({},this.form)};return t.information.pageId=t.information.image=void 0,t.information.image_attributes={id:this.form.image.id},t}this.$message.error("链接不可为空")}else this.$message.error("图片不可为空")},articleLinkInputChange:function(t){this.form.link=t},pagePickChange:function(t){this.form.link=t},submit:function(){var t=this,e=this.formatSubmitValue();e&&this.$http[this.submitFuncName](e).then(function(e){0==e.data.retcode?(t.$message.success("保存成功"),t.$router.push({path:"/information/list"})):t.$message.error("保存失败")})},onSubmit:function(){var t=this;this.$refs.form.validate().then(function(e){return t.submit()}).catch(function(){})},removeConverImageUrl:function(){this.form.image.id=this.form.image.url=""},handleAvatarSuccess:function(t){this.form.image.id=t.result_rows.id,this.form.image.url=t.result_rows.url},beforeAvatarUpload:function(t){var e=t.type.startsWith("image/"),r=t.size/1024/1024<2;return e||this.$message.error("只允许上传图片"),r||this.$message.error("上传图片大小不能超过 2MB!"),e&&r}},created:function(){var t=this;switch(this.$http.pageList().then(function(e){var r;e&&(r=t.pageList).push.apply(r,d(e.data.result_rows.pages))}),this.$router.currentRoute.name){case"information_create":this.pageTitle="添加咨讯",this.submitBtnTitle="提交",this.submitFuncName="informationCreate";break;default:this.pageTitle="编辑咨讯",this.submitBtnTitle="保存所有编辑结果",this.submitFuncName="informationUpdate",this.$http.InfomationDetail(this.$router.currentRoute.params).then(function(e){e&&(h()(t.form,e.data.result_rows),"page"===t.form.link_type&&(t.form.pageId=t.form.link),"article"===t.form.link_type&&(t.form.articleLink=t.form.link),t.form.image||(t.form.image={id:"",url:""}))})}}}),v=g,k=(r("8e20"),r("25c1")),y=Object(k["a"])(v,i,a,!1,null,null,null);y.options.__file="detail.vue";e["default"]=y.exports},6609:function(t,e,r){r("0862"),r("a8ce"),t.exports=r("c4ad")},"78ab":function(t,e,r){"use strict";var i=r("4252"),a=r("e912"),n=r("5ebf"),o=r("892a"),s=r("0762"),l=r("72f4"),c=r("091d"),f=r("0749");a(a.S+a.F*!r("7964")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,a,u,m=n(t),p="function"==typeof this?this:Array,d=arguments.length,b=d>1?arguments[1]:void 0,h=void 0!==b,g=0,v=f(m);if(h&&(b=i(b,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(e=l(m.length),r=new p(e);e>g;g++)c(r,g,h?b(m[g],g):m[g]);else for(u=v.call(m),r=new p;!(a=u.next()).done;g++)c(r,g,h?o(u,b,[a.value,g],!0):a.value);return r.length=g,r}})},"7d31":function(t,e,r){var i=r("b816")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,!"/./"[t](e)}catch(a){}}return!0}},8439:function(t,e,r){r("8b10"),t.exports=r("332a").Array.isArray},"8b10":function(t,e,r){var i=r("e912");i(i.S,"Array",{isArray:r("350b")})},"8e20":function(t,e,r){"use strict";var i=r("9c6f"),a=r.n(i);a.a},"942b":function(t,e,r){var i=r("ac1b"),a=r("e96b"),n=r("346b"),o=/"/g,s=function(t,e,r,i){var a=String(n(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+a+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(s),i(i.P+i.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},"9c6f":function(t,e,r){},b7ad:function(t,e,r){"use strict";r("942b")("link",function(t){return function(e){return t(this,"a","href",e)}})},b7e2:function(t,e,r){r("a8ce"),r("78ab"),t.exports=r("332a").Array.from},bc2a:function(t,e,r){t.exports=r("8439")},c4ad:function(t,e,r){var i=r("1290"),a=r("3e81")("iterator"),n=r("c687");t.exports=r("332a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||n.hasOwnProperty(i(e))}},f22f:function(t,e,r){t.exports=r("b7e2")},f360:function(t,e,r){t.exports=r("bdcc")}}]);
//# sourceMappingURL=chunk-21a24e00.c91a37b8.js.map