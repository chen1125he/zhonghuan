{"version":3,"sources":["webpack:///./node_modules/_core-js@2.6.1@core-js/modules/_object-assign.js","webpack:///./node_modules/_core-js@2.6.1@core-js/modules/_object-gops.js","webpack:///./node_modules/_core-js@2.6.1@core-js/modules/_object-pie.js","webpack:///./node_modules/_core-js@2.6.1@core-js/modules/es6.object.assign.js","webpack:///./src/views/page/detail.vue?ff79","webpack:///./src/views/page/detail.vue?7a35","webpack:///src/views/page/detail.vue","webpack:///./src/views/page/detail.vue?efd7","webpack:///./src/views/page/detail.vue?1023"],"names":["getKeys","__webpack_require__","gOPS","pIE","toObject","IObject","$assign","Object","assign","module","exports","A","B","S","Symbol","K","split","forEach","k","keys","join","target","source","T","aLen","arguments","length","index","getSymbols","f","isEnum","key","concat","j","call","getOwnPropertySymbols","propertyIsEnumerable","$export","F","_node_modules_mini_css_extract_plugin_0_4_5_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_detail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_0_4_5_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_detail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","margin","font-size","color","attrs","type","justify","_v","_s","pageTitle","margin-top","ref","min-width","model","form","rules","label-width","label-position","label","prop","span","placeholder","autosize","value","callback","$$v","$set","expression","margin-left","font-weight","_l","item","item_type","width","offset","icon","size","on","click","$event","deleteTextImage","_e","action","show-file-list","drag","multiple","name","on-success","handleAvatarSuccess","before-upload","beforeAvatarUpload","src","image","margin-bottom","plain","addText","addImage","submitForm","staticRenderFns","G_IMAGE_SIZE","detailvue_type_script_lang_js_","components","data","pageState","pageId","page_items","required","message","trigger","watch","newValue","methods","queryPageDetail","_this","params","page_id","$http","pageDetail","then","res","result","resultRows","result_rows","retcode","$message","error","push","content","splice","formName","_this2","$refs","validate","valid","parasmWrap","page_items_attributes","map","position","page","addPage","success","setTimeout","$router","path","editPage","url","image_attributes","id","file","isJPG","isJPEG","isPNG","isLt2M","mounted","$route","query","page_detailvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-1ec1df2e.289d265e.js","sourcesContent":["'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n","exports.f = Object.getOwnPropertySymbols;\n","exports.f = {}.propertyIsEnumerable;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",staticStyle:{\"margin\":\"15px 15px\"}},[_c('el-row',{staticStyle:{\"font-size\":\"16px\",\"color\":\"#303133\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_vm._v(_vm._s(_vm.pageTitle))]),_c('el-row',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_c('el-form',{ref:\"form\",staticStyle:{\"min-width\":\"500px\"},attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"80px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"页面名称\",\"prop\":\"name\"}},[_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{attrs:{\"placeholder\":\"请输入页面名称\",\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1)],1),_c('div',{staticStyle:{\"margin-left\":\"10px\",\"font-size\":\"14px\",\"font-weight\":\"900\"}},[_vm._v(\"页面内容\"),_c('i',{staticClass:\"avatar-limit\"},[_vm._v(\"图片小于1M,格式jpg,png,jpeg\")])]),_vm._l((_vm.form.page_items),function(item,index){return [(item.item_type == 'content')?_c('el-form-item',{key:index,attrs:{\"label\":\"文字\"}},[_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入文字 \",\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(item.content),callback:function ($$v) {_vm.$set(item, \"content\", $$v)},expression:\"item.content\"}})],1),_c('el-col',{attrs:{\"span\":2,\"offset\":2}},[_c('el-button',{attrs:{\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteTextImage(index)}}})],1)],1)],1):_vm._e(),(item.item_type == 'image')?_c('el-form-item',{key:index,attrs:{\"label\":\"图片\"}},[_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://szebra.cn/api/admin/images.json\",\"show-file-list\":false,\"drag\":false,\"multiple\":false,\"name\":\"image[file]\",\"on-success\":_vm.handleAvatarSuccess(item),\"before-upload\":_vm.beforeAvatarUpload}},[(item.image)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":item.image}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-col',{attrs:{\"span\":2,\"offset\":2}},[_c('el-button',{attrs:{\"icon\":\"el-icon-delete\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteTextImage(index)}}})],1)],1)],1):_vm._e()]}),_c('el-row',{staticStyle:{\"margin-bottom\":\"30px\",\"margin-top\":\"30px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.addText}},[_vm._v(\"添加文字\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.addImage}},[_vm._v(\"添加图片\")])],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('form')}}},[_vm._v(\"保存\")])],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\" style=\"margin: 15px 15px;\">\r\n    <!-- 页面名字 -->\r\n    <el-row type=\"flex\" justify=\"start\" style=\" font-size: 16px; color: #303133;\">{{pageTitle}}</el-row>\r\n    <el-row type=\"flex\" justify=\"start\" style=\"margin-top: 30px;\">\r\n     <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\" label-position=\"right\" style=\"min-width: 500px;\">\r\n        <el-form-item label=\"页面名称\" prop=\"name\">\r\n          <el-row type=\"flex\">\r\n            <el-col :span=\"20\">\r\n              <el-input v-model=\"form.name\" placeholder=\"请输入页面名称\" type=\"textarea\" autosize></el-input>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form-item>\r\n        <div style=\"margin-left:10px; font-size: 14px; font-weight: 900;\">页面内容<i class=\"avatar-limit\">图片小于1M,格式jpg,png,jpeg</i></div>\r\n        <template v-for=\"(item, index) in form.page_items\">\r\n              <el-form-item v-if=\"item.item_type == 'content'\" label=\"文字\" :key=\"index\">\r\n                <el-row type=\"flex\">\r\n                  <el-col :span=\"20\">\r\n                    <el-input v-model=\"item.content\" placeholder=\"请输入文字 \" type=\"textarea\" autosize style=\"width: 100%;\"></el-input>\r\n                  </el-col>\r\n                  <el-col :span=\"2\" :offset=\"2\">\r\n                    <el-button icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteTextImage(index)\"></el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-form-item>\r\n              <el-form-item v-if=\"item.item_type == 'image'\" label=\"图片\" :key=\"index\">\r\n                <el-row type=\"flex\">\r\n                  <el-col :span=\"10\">\r\n                    <el-upload class=\"avatar-uploader\"\r\n                               action=\"http://szebra.cn/api/admin/images.json\"\r\n                               :show-file-list=\"false\"\r\n                               :drag=\"false\"\r\n                               :multiple=\"false\"\r\n                               name=\"image[file]\"\r\n                               :on-success=\"handleAvatarSuccess(item)\"\r\n                               :before-upload=\"beforeAvatarUpload\">\r\n                      <img v-if=\"item.image\" :src=\"item.image\" class=\"avatar\">\r\n                      <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                  </el-col>\r\n                  <el-col :span=\"2\" :offset=\"2\">\r\n                    <el-button icon=\"el-icon-delete\" size=\"small\" @click=\"deleteTextImage(index)\"></el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-form-item>\r\n        </template>\r\n        <el-row style=\"margin-bottom: 30px;margin-top: 30px;\">\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"addText\">添加文字</el-button>\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"addImage\">添加图片</el-button>\r\n        </el-row>\r\n        <el-button type=\"primary\" @click=\"submitForm('form')\">保存</el-button>\r\n      </el-form>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nconst G_IMAGE_SIZE = 2 // 图片大小\r\n\r\nexport default {\r\n  components: {\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      pageState: '', // 1新增，2编辑，3预览\r\n      pageTitle: '', // 页面标题\r\n      pageId: '', // 自定义页面id\r\n      form: {\r\n        name: '',\r\n        page_items: []\r\n      },\r\n      rules: { // 校验规则\r\n        name: { required: true, message: '请输入资讯标题名称', trigger: 'blur' }\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    pageState (newValue) {\r\n      let name = '自定义'\r\n      switch (newValue) {\r\n        case 1:\r\n          this.pageTitle = `新增${name}`\r\n          break\r\n        case 2:\r\n          this.pageTitle = `编辑${name}`\r\n          break\r\n        case 3:\r\n          this.pageTitle = `${name}详情`\r\n          break\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 查询自定页面详情\r\n    queryPageDetail () {\r\n      let params = {\r\n        page_id: this.pageId\r\n      }\r\n      this.$http.pageDetail(params, 'get').then(res => {\r\n        let result = res.data\r\n        let resultRows = result.result_rows || {}\r\n        if (result.retcode === 0) {\r\n          this.form = resultRows\r\n        } else {\r\n          this.$message.error(`${result.retcode}${result.message}`)\r\n        }\r\n      })\r\n    },\r\n    // 添加文字\r\n    addText () {\r\n      this.form.page_items.push({\r\n        item_type: 'content',\r\n        image: '',\r\n        content: ''\r\n      })\r\n    },\r\n\r\n    // 添加图片\r\n    addImage () {\r\n      this.form.page_items.push({\r\n        item_type: 'image',\r\n        image: '',\r\n        content: ''\r\n      })\r\n    },\r\n\r\n    // 删除图片或者文字\r\n    deleteTextImage (index) {\r\n      this.form.page_items.splice(index, 1)\r\n    },\r\n\r\n    // 提交表单\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let params = {}\r\n          let parasmWrap = {}\r\n\r\n          params.name = this.form.name\r\n          params.page_items_attributes = this.form.page_items.map((item, index) => {\r\n            return Object.assign({ position: index }, item)\r\n          })\r\n          parasmWrap.page = params\r\n          if (this.pageState === 1) {\r\n            this.$http.addPage(parasmWrap, 'post').then(res => {\r\n              let result = res.data\r\n\r\n              if (result.retcode === 0) {\r\n                this.$message.success('新增成功')\r\n                setTimeout(() => {\r\n                  this.$router.push({\r\n                    path: '/page/list'\r\n                  })\r\n                }, 300)\r\n              } else {\r\n                this.$message.error('新增失败')\r\n              }\r\n            })\r\n          } else {\r\n            this.$http.editPage(parasmWrap, 'patch').then(res => {\r\n              let result = res.data\r\n              if (result.retcode === 0) {\r\n                this.$message.success('修改成功')\r\n                setTimeout(() => {\r\n                  this.$router.push({\r\n                    path: '/page/list'\r\n                  })\r\n                }, 300)\r\n              } else {\r\n                this.$message.error('修改成功')\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n\r\n    handleAvatarSuccess (data) {\r\n      return function (res) {\r\n        // res为接口返回数据\r\n        let resultRows = res.result_rows || {}\r\n        let retcode = res.retcode\r\n        if (retcode === 0) {\r\n          this.$message.success('上传成功')\r\n          data.image = resultRows.url\r\n          data.image_attributes = {}\r\n          data.image_attributes.id = resultRows.id\r\n        } else {\r\n          this.$message.error(`${retcode}${res.message}`)\r\n        }\r\n      }\r\n      // this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n\r\n    beforeAvatarUpload (file) {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isJPEG = file.type === 'image/jpeg'\r\n      const isPNG = file.type === 'image/png'\r\n      const isLt2M = file.size / 1024 / 1024 < G_IMAGE_SIZE\r\n\r\n      if (!isJPG && !isJPEG && !isPNG) {\r\n        this.$message.error('上传头像图片只能是 JPG、jpeg、png格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(`上传头像图片大小不能超过${G_IMAGE_SIZE} MB!`)\r\n      }\r\n      return isJPG && isLt2M\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.pageState = +this.$route.query.pageState || 1\r\n    this.pageId = this.$route.query['page_id'] || ''\r\n    if (this.pageState !== 1) {\r\n      this.queryPageDetail()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n  .avatar-limit{\r\n    font-size: 12px;\r\n    font-weight: 300;\r\n    margin-left: 20px;\r\n    color: #909399;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=0cb5a724&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"detail.vue\"\nexport default component.exports"],"sourceRoot":""}