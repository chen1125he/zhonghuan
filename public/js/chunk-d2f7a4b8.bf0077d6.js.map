{"version":3,"sources":["webpack:///./node_modules/_core-js@2.6.2@core-js/modules/es6.string.starts-with.js","webpack:///./node_modules/_core-js@2.6.2@core-js/modules/_string-context.js","webpack:///./node_modules/_core-js@2.6.2@core-js/modules/_fails-is-regexp.js","webpack:///./node_modules/_core-js@2.6.2@core-js/modules/_string-html.js","webpack:///./node_modules/_core-js@2.6.2@core-js/modules/es6.string.link.js","webpack:///./src/views/rotation/detail.vue?45db","webpack:///./src/views/rotation/detail.vue?69f3","webpack:///src/views/rotation/detail.vue","webpack:///./src/views/rotation/detail.vue?ab06","webpack:///./src/views/rotation/detail.vue?3f22","webpack:///./node_modules/_@babel_runtime-corejs2@7.2.0@@babel/runtime-corejs2/core-js/object/assign.js"],"names":["$export","__webpack_require__","toLength","context","STARTS_WITH","$startsWith","P","F","startsWith","searchString","that","this","index","Math","min","arguments","length","undefined","search","String","call","slice","isRegExp","defined","module","exports","NAME","TypeError","MATCH","KEY","re","e","f","fails","quot","createHTML","string","tag","attribute","value","S","p1","replace","exec","O","test","toLowerCase","split","url","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_5_1_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_5_1_vue_loader_lib_index_js_vue_loader_options_detail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_5_1_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_5_1_vue_loader_lib_index_js_vue_loader_options_detail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","margin","font-size","color","attrs","type","justify","to","_v","_s","pageTitle","margin-top","ref","model","form","label-width","label-suffix","label-position","label","required","image","original","src","on","click","removeAvatarImageUrl","action","show-file-list","on-success","handleAvatarSuccess","name","before-upload","beforeAvatarUpload","callback","$$v","$set","expression","link_type","placeholder","_e","filterable","_l","item","key","id","link","onSubmit","submitBtnTitle","staticRenderFns","detailvue_type_script_lang_js_","components","data","pageState","pages","articleLink","pageLink","methods","result_rows","file","isImg","isLt2M","size","$message","error","initForm","assign_default","concat","formatSubmitValue","ret","slider","image_attributes","_this","console","log","stringify_default","$http","submitFuncName","then","res","success","mounted","_this2","$router","currentRoute","rotationDetail","params","pageList","per","page","rotation_detailvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-d2f7a4b8.bf0077d6.js","sourcesContent":["// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",staticStyle:{\"margin\":\"15px 15px\"}},[_c('el-row',{staticStyle:{\"font-size\":\"16px\",\"color\":\"#303133\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_c('router-link',{staticClass:\"el-button--text\",attrs:{\"to\":\"/rotation/list\",\"replace\":\"\"}},[_vm._v(\"轮播图管理\")]),_vm._v(\"\\n    / \"+_vm._s(_vm.pageTitle)+\"\\n  \")],1),_c('el-row',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\",\"label-suffix\":\":\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"轮播图片\",\"required\":\"\"}},[(_vm.form.image && _vm.form.image.original)?_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.form.image.original}}),_c('i',{staticClass:\"el-icon-circle-close\",on:{\"click\":_vm.removeAvatarImageUrl}})]):_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://szebra.cn/api/admin/images\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"name\":\"image[file]\",\"before-upload\":_vm.beforeAvatarUpload}},[_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"资讯类别\",\"required\":\"\"}},[_c('el-radio-group',{model:{value:(_vm.form.link_type),callback:function ($$v) {_vm.$set(_vm.form, \"link_type\", $$v)},expression:\"form.link_type\"}},[_c('el-radio',{attrs:{\"label\":'none'}},[_vm._v(\"不链接\")]),_c('el-radio',{attrs:{\"label\":'article'}},[_vm._v(\"链接公众号文章\")]),_c('el-radio',{attrs:{\"label\":'page'}},[_vm._v(\"自定义页面\")])],1)],1),(_vm.form.link_type == 'article')?_c('el-form-item',{attrs:{\"label\":\"文章地址\",\"required\":\"\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入公众号文章地址\"},model:{value:(_vm.form.articleLink),callback:function ($$v) {_vm.$set(_vm.form, \"articleLink\", $$v)},expression:\"form.articleLink\"}})],1):_vm._e(),(_vm.form.link_type == 'page')?_c('el-form-item',{attrs:{\"label\":\"链接页面\",\"required\":\"\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择链接页面\"},model:{value:(_vm.form.pageLink),callback:function ($$v) {_vm.$set(_vm.form, \"pageLink\", $$v)},expression:\"form.pageLink\"}},_vm._l((_vm.pages),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.link}})}),1)],1):_vm._e(),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.submitBtnTitle))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\" style=\"margin: 15px 15px;\">\r\n    <!-- 页面名字 -->\r\n    <el-row type=\"flex\" justify=\"start\" style=\" font-size: 16px; color: #303133;\">\r\n      <router-link class='el-button--text' to=\"/rotation/list\" replace>轮播图管理</router-link>\r\n      / {{pageTitle}}\r\n    </el-row>\r\n    <el-row type=\"flex\" justify=\"start\" style=\"margin-top: 30px;\">\r\n     <el-form ref=\"form\" :model=\"form\" label-width=\"100px\" label-suffix=\":\" label-position=\"left\">\r\n        <el-form-item label=\"轮播图片\" required>\r\n          <div v-if=\"form.image && form.image.original\" class=\"avatar\">\r\n            <img :src=\"form.image.original\" />\r\n            <i class=\"el-icon-circle-close\" @click=\"removeAvatarImageUrl\" />\r\n          </div>\r\n          <el-upload v-else class=\"avatar-uploader\"\r\n                    action=\"http://szebra.cn/api/admin/images\"\r\n                    :show-file-list=\"false\"\r\n                    :on-success=\"handleAvatarSuccess\"\r\n                    name=\"image[file]\"\r\n                    :before-upload=\"beforeAvatarUpload\">\r\n            <i class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"资讯类别\" required>\r\n          <el-radio-group v-model=\"form.link_type\">\r\n            <el-radio :label=\"'none'\">不链接</el-radio>\r\n            <el-radio :label=\"'article'\">链接公众号文章</el-radio>\r\n            <el-radio :label=\"'page'\">自定义页面</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"form.link_type == 'article'\" label=\"文章地址\" required>\r\n          <el-input v-model=\"form.articleLink\" placeholder=\"请输入公众号文章地址\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"form.link_type == 'page'\" label=\"链接页面\" required>\r\n          <el-select v-model=\"form.pageLink\" filterable placeholder=\"请选择链接页面\">\r\n            <el-option v-for=\"item in pages\" :key=\"item.id\" :label=\"item.name\" :value=\"item.link\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit\" style=\"\">{{ submitBtnTitle }}</el-button>\r\n      </el-form>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  components: {\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      pageState: '', // 1新增，2编辑，3预览\r\n      pageTitle: '', // 页面标题\r\n      submitBtnTitle: '',\r\n      pages: [],\r\n      form: {\r\n        id: '',\r\n        image: {\r\n          original: ''\r\n        },\r\n        link_type: 'none',\r\n        link: '',\r\n        articleLink: '',\r\n        pageLink: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    removeAvatarImageUrl () {\r\n      this.form.image = {}\r\n    },\r\n    handleAvatarSuccess(data) {\r\n      this.form.image.id = data.result_rows.id\r\n      this.form.image.original = data.result_rows.url\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isImg = file.type.startsWith('image/');\r\n      const isLt2M = file.size / 1024 / 1024 < 5;\r\n      if (!isImg) {\r\n        this.$message.error('只允许上传图片');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传图片大小不能超过 5MB!');\r\n      }\r\n      return isImg && isLt2M;\r\n    },\r\n    initForm (data) {\r\n      Object.assign(this.form, data)\r\n      this.form[`${data.link_type}Link`] = data.link\r\n    },\r\n    formatSubmitValue () {\r\n      if (!this.form.image.id) {\r\n        this.$message.error('图片不能为空')\r\n        return\r\n      }\r\n      switch (this.form.link_type) {\r\n        case 'none':\r\n          this.form.link = ''\r\n          break\r\n        case 'page':\r\n          if (!this.form.pageLink) {\r\n            this.$message.error('链接页面不可为空')\r\n            return\r\n          }\r\n          this.form.link = this.form.pageLink\r\n          break\r\n        case 'article':\r\n          if (!this.form.articleLink) {\r\n            this.$message.error('文章地址不可为空')\r\n            return\r\n          }\r\n          this.form.link = this.form.articleLink\r\n      }\r\n      const ret = { id: this.form.id, slider: Object.assign({}, this.form) }\r\n      ret.slider.image_attributes = { id: this.form.image.id }\r\n      ret.slider.image = ret.slider.pageLink = ret.slider.articleLink = undefined\r\n      return ret\r\n    },\r\n    // 提交表单\r\n    onSubmit () {\r\n      const data = this.formatSubmitValue()\r\n      console.log(JSON.stringify(data))\r\n      if (!data) return\r\n      this.$http[this.submitFuncName](data).then(res => {\r\n        if (!res) return\r\n        this.initForm(res.data.result_rows)\r\n        this.$message.success('保存成功')\r\n      })\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    switch (this.$router.currentRoute.name) {\r\n      case 'rotation_create':\r\n        this.pageTitle = '添加轮播图'\r\n        this.submitBtnTitle = '提交'\r\n        this.submitFuncName = 'rotationCreate'\r\n        break\r\n      default:\r\n        this.pageTitle = '编辑轮播图'\r\n        this.submitBtnTitle = '保存所有编辑结果'\r\n        this.submitFuncName = 'rotationUpdate'\r\n        this.$http.rotationDetail(this.$router.currentRoute.params)\r\n            .then(res => {\r\n              if (!res) return\r\n              this.initForm(res.data.result_rows)\r\n            })\r\n    }\r\n    // need fix\r\n    // 自定义页面缺少 link\r\n    this.$http.pageList({ per: 100, page: 0 })\r\n      .then(res => {\r\n        if (!res) return\r\n        Object.assign(this.pages, res.data.result_rows.pages)\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    position: relative;\r\n    float: left;\r\n    margin-right: 5px;\r\n  }\r\n  .avatar img {\r\n    margin-top: 6px;\r\n    margin-right: 6px;\r\n    width: 178px;\r\n    height: 178px;\r\n  }\r\n  .avatar i {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    opacity: 0.6;\r\n  }\r\n  .avatar i:hover {\r\n    opacity: 1;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=3fe2e6b4&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.5.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"detail.vue\"\nexport default component.exports","module.exports = require(\"core-js/library/fn/object/assign\");"],"sourceRoot":""}