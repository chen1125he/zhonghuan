(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-896ba1c4"],{"27ab":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{margin:"15px 15px"}},[a("el-row",{staticStyle:{"font-size":"16px",color:"#303133"},attrs:{type:"flex",justify:"start"}},[a("router-link",{staticClass:"el-button--text",attrs:{to:"/adviser/list",replace:""}},[t._v("顾问管理")]),t._v("\n    / "+t._s(t.pageTitle)+"\n  ")],1),a("el-row",{staticStyle:{"margin-top":"30px"},attrs:{type:"flex",justify:"start"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px","label-suffix":":","label-position":"left"}},[a("el-form-item",{attrs:{label:"顾问姓名",prop:"name",required:""}},[a("el-input",{attrs:{placeholder:"请输入顾问姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"顾问图片",required:""}},[t.form.avatar&&t.form.avatar.id?a("div",{staticClass:"avatar"},[a("img",{attrs:{src:"http://szebra.cn"+t.form.avatar.url}}),a("i",{staticClass:"el-icon-circle-close",on:{click:t.removeConverImageUrl}})]):a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://szebra.cn/api/admin/images","show-file-list":!1,"on-success":t.handleAvatarSuccess,name:"image[file]","before-upload":t.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"职称描述",prop:"desc",required:""}},[a("el-input",{attrs:{placeholder:"请输入职称描述"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{attrs:{label:"星级",required:""}},[a("el-select",{model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},t._l([1,2,3,4,5],function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"顾问电话",prop:"name",required:""}},[a("el-input",{attrs:{placeholder:"请输入顾问电话"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"服务楼盘",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择服务楼盘"},model:{value:t.form.building_id,callback:function(e){t.$set(t.form,"building_id",e)},expression:"form.building_id"}},t._l(t.buildingList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.submitBtnTitle))])],1)],1)],1)},i=[],s=(a("d85c"),a("3573"),a("f360")),l=a.n(s),n={components:{},data:function(){return{submitFuncName:"",pageState:"",pageTitle:"",submitBtnTitle:"",form:{avatar:{id:"",url:""},desc:"",id:"",level:1,mobile:"",name:"",building_id:""},buildingList:[]}},methods:{submit:function(){var t=this,e=this.formatSubmitValue();this.$http[this.submitFuncName](e).then(function(e){e&&t.$message.success("保存成功")})},formatSubmitValue:function(){this.form.avatar.id||this.$message.error("顾问图片不可为空");var t={id:this.form.id,adviser:l()({},this.form)};return t.adviser.avatar_attributes={id:this.form.avatar.id},t.adviser.id=t.adviser.avatar=void 0,t},onSubmit:function(){var t=this;this.$refs.form.validate().then(function(e){return t.submit()}).catch(function(){})},removeConverImageUrl:function(){this.form.avatar.id=this.form.avatar.url=""},handleAvatarSuccess:function(t){this.form.avatar=t.result_rows},beforeAvatarUpload:function(t){var e=t.type.startsWith("image/"),a=t.size/1024/1024<5;return e||this.$message.error("只允许上传图片"),a||this.$message.error("上传图片大小不能超过 5MB!"),e&&a}},created:function(){var t=this;switch(this.$http.buildingList({per:1e3,page:0}).then(function(e){e&&(t.buildingList=e.data.result_rows.buildings)}),this.$router.currentRoute.name){case"adviser_create":this.pageTitle="新增顾问",this.submitBtnTitle="提交",this.submitFuncName="adviserCreate";break;default:this.pageTitle="编辑顾问",this.submitBtnTitle="保存所有编辑结果",this.submitFuncName="adviserUpdate",this.$http.adviserDetail(this.$router.currentRoute.params).then(function(e){e&&l()(t.form,e.data.result_rows)})}}},o=n,u=(a("d27f"),a("25c1")),c=Object(u["a"])(o,r,i,!1,null,null,null);c.options.__file="detail.vue";e["default"]=c.exports},3573:function(t,e,a){"use strict";var r=a("ac1b"),i=a("5b7f"),s=a("3a08"),l="startsWith",n=""[l];r(r.P+r.F*a("7d31")(l),"String",{startsWith:function(t){var e=s(this,t,l),a=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return n?n.call(e,r,a):e.slice(a,a+r.length)===r}})},"3a08":function(t,e,a){var r=a("f83a"),i=a("346b");t.exports=function(t,e,a){if(r(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(i(t))}},"7d31":function(t,e,a){var r=a("b816")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},d27f:function(t,e,a){"use strict";var r=a("e171"),i=a.n(r);i.a},e171:function(t,e,a){},f360:function(t,e,a){t.exports=a("bdcc")}}]);
//# sourceMappingURL=chunk-896ba1c4.674cd484.js.map